{"ast":null,"code":"var ReadPreference = require('../topologies/read_preference');\n\nvar getReadPreference = function (cmd, options) {\n  // Default to command version of the readPreference\n  var readPreference = cmd.readPreference || new ReadPreference('primary'); // If we have an option readPreference override the command one\n\n  if (options.readPreference) {\n    readPreference = options.readPreference;\n  }\n\n  if (typeof readPreference == 'string') {\n    readPreference = new ReadPreference(readPreference);\n  }\n\n  if (!(readPreference instanceof ReadPreference)) {\n    throw new MongoError('readPreference must be a ReadPreference instance');\n  }\n\n  return readPreference;\n};\n\nmodule.exports = {\n  getReadPreference: getReadPreference\n};","map":null,"metadata":{},"sourceType":"script"}